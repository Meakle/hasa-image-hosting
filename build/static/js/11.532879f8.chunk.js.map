{"version":3,"sources":["pages/Login.jsx"],"names":["Index","observer","flag","AuthStore","useStores","history","useHistory","fade","keyframes","Wrapper","styled","div","StyleButton","Button","A","a","StyleInput","Input","handleLogin","name","className","wrapperCol","span","offset","initialValues","remember","onFinish","values","setUsername","username","setPassword","password","login","then","push","catch","error","console","log","onFinishFailed","errorInfo","Item","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","prefix","placeholder","type","onClick","htmlType"],"mappings":"2QAWMA,EAAQC,aAAS,WACnB,IAAIC,GAAO,EACHC,EAAcC,cAAdD,UACFE,EAAUC,cA8BVC,EAAOC,YAAH,yFAWJC,EAAUC,IAAOC,IAAV,qEAAGD,CAAH,2JAOIH,GAGXK,EAAcF,YAAOG,KAAV,yEAAGH,CAAH,wBAIXI,EAAIJ,IAAOK,EAAV,+DAAGL,CAAH,uBAIDM,EAAaN,YAAOO,KAAV,wEAAGP,CAAH,oCAUVQ,EAAc,WAChBhB,GAAQA,GAGZ,OACQ,cAACO,EAAD,UACI,eAAC,IAAD,CACIU,KAAK,eACLC,UAAU,aACVC,WAAY,CAAEC,KAAM,GAAIC,OAAQ,GAChCC,cAAe,CACXC,UAAU,GAEdC,SA/EC,SAACC,GACdxB,EAAUyB,YAAYD,EAAOE,UAC7B1B,EAAU2B,YAAYH,EAAOI,UAC7B5B,EAAU6B,QACLC,MAAK,WACF5B,EAAQ6B,KAAK,KACbhB,OAEHiB,OAAM,SAACC,GACJC,QAAQC,IAAIF,OAuERG,eAnEO,SAACC,GACpBH,QAAQC,IAAI,UAAWE,IA0Df,UAWI,cAAC,IAAD,UAAU,gDACV,cAAC,IAAKC,KAAN,CACItB,KAAK,WACLuB,MAAO,CACH,CACIC,UAAU,EACVC,QAAS,wCAEb,CACIC,UA1EF,SAACC,EAAMC,GAC7B,MAAI,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,gEACxCH,EAAMI,OAAS,GAAKJ,EAAMI,OAAS,GAAWF,QAAQC,OAAO,4CAC1DD,QAAQG,aA+DH,SAYI,cAACpC,EAAD,CAAYqC,OAAQ,cAAC,IAAD,CAAcjC,UAAU,wBAA0BkC,YAAY,yBAEtF,cAAC,IAAKb,KAAN,CACItB,KAAK,WACLuB,MAAO,CACH,CACIC,UAAU,EACVC,QAAS,mCALrB,SASI,cAAC5B,EAAD,CACIqC,OAAQ,cAAC,IAAD,CAAcjC,UAAU,wBAChCmC,KAAK,WACLD,YAAY,mBAIpB,eAAC,IAAKb,KAAN,WACI,cAAC7B,EAAD,CAAa4C,QAAStC,EAAaqC,KAAK,UAAUE,SAAS,SAASrC,UAAU,oBAA9E,0BAGA,eAACN,EAAD,CAAG0C,QAxDH,WAChBnD,EAAQ6B,KAAK,cAuDG,UAAyB,cAAC,IAAD,IAAzB,6CAQTlC","file":"static/js/11.532879f8.chunk.js","sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react'\nimport styled, { keyframes } from 'styled-components'\nimport { useStores } from '../stores'\nimport { useHistory } from 'react-router-dom'\nimport { Form, Input, Button, Spin } from 'antd';\nimport { UserOutlined, LockOutlined, ArrowRightOutlined } from '@ant-design/icons';\nimport FormItem from 'antd/lib/form/FormItem'\n\n\n// 给原来的组件添加监控\nconst Index = observer(() => {\n    let flag = false;\n    const { AuthStore } = useStores();\n    const history = useHistory();\n\n    //#region from表单属性\n    const onFinish = (values) => {\n        AuthStore.setUsername(values.username);\n        AuthStore.setPassword(values.password);\n        AuthStore.login()\n            .then(() => {\n                history.push('/');\n                handleLogin();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    };\n\n    const onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n\n    // 判断规则\n    const validatorUsername = (rule, value) => {\n        if (/\\W/.test(value)) return Promise.reject('只能是字母或者下划线');\n        if (value.length < 4 || value.length > 10) return Promise.reject('长度为4-10个字符');\n        return Promise.resolve();\n    }\n    //#endregion\n\n    //#region 样式 \n    // 淡入动画效果, styled-components 暴露出的API\n    const fade = keyframes`\n    from {\n        opacity: 0;\n        transform: translateY(40px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0px);\n    }\n    `\n\n    const Wrapper = styled.div`\n        max-width: 600px;\n        margin: 30px auto;\n        padding: 30px 20px;\n        border-radius: 10px;\n        box-shadow: 3px 3px 20px #bebebe;\n        background-color: #fff;\n        animation: ${fade} 1500ms ease;\n    `\n\n    const StyleButton = styled(Button)`\n        border-radius: 4px;\n    `\n\n    const A = styled.a`\n        margin-left: 20px;\n    `\n\n    const StyleInput = styled(Input)`\n        height: 40px;\n        border-radius: 4px;\n    `\n    //#endregion\n\n    const handleClick = () => {\n        history.push('/register');\n    }\n\n    const handleLogin = () => {\n        flag = !flag;\n    }\n\n    return (\n            <Wrapper>\n                <Form\n                    name=\"normal_login\"\n                    className=\"login-form\"\n                    wrapperCol={{ span: 12, offset: 6 }}\n                    initialValues={{\n                        remember: true,\n                    }}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                >\n\n                    <FormItem><h1>登录</h1></FormItem>\n                    <Form.Item\n                        name=\"username\"\n                        rules={[\n                            {\n                                required: true,\n                                message: '请输入用户名',\n                            },\n                            {\n                                validator: validatorUsername\n                            }\n                        ]}\n                    >\n                        <StyleInput prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"用户名\" />\n                    </Form.Item>\n                    <Form.Item\n                        name=\"password\"\n                        rules={[\n                            {\n                                required: true,\n                                message: '请输入密码',\n                            },\n                        ]}\n                    >\n                        <StyleInput\n                            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                            type=\"password\"\n                            placeholder=\"密码\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item>\n                        <StyleButton onClick={handleLogin} type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                            登录\n                    </StyleButton>\n                        <A onClick={handleClick}><ArrowRightOutlined />&nbsp;即刻注册</A>\n                    </Form.Item>\n                </Form>\n\n            </Wrapper>\n    );\n})\n\nexport default Index;\n\n"],"sourceRoot":""}